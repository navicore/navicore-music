<!-- Album/Track Grid - Responsive layout -->
<div class="space-y-6">
    <!-- Page Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <h1 class="text-3xl font-bold">{{ title }}</h1>
        
        <!-- View Options - Desktop -->
        <div class="hidden sm:flex items-center gap-2">
            <button class="btn btn-sm btn-ghost" onclick="setView('grid')">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"></path>
                </svg>
            </button>
            <button class="btn btn-sm btn-ghost" onclick="setView('list')">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"></path>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Grid View -->
    <div id="grid-view" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4">
        {% for album in albums %}
        <div class="group cursor-pointer" onclick="playAlbum('{{ album.id }}')">
            <div class="relative aspect-square mb-2 overflow-hidden rounded-lg bg-base-300">
                <img src="{{ album.cover_url }}" 
                     alt="{{ album.title }}" 
                     class="w-full h-full object-cover transition-transform group-hover:scale-105"
                     loading="lazy">
                
                <!-- Play button overlay -->
                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <button class="btn btn-circle btn-primary">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <h3 class="font-medium truncate">{{ album.title }}</h3>
            <p class="text-sm text-base-content/70 truncate">{{ album.artist }}</p>
        </div>
        {% endfor %}
    </div>
    
    <!-- List View (Hidden by default) -->
    <div id="list-view" class="hidden">
        <div class="overflow-x-auto">
            <table class="table table-zebra">
                <thead>
                    <tr>
                        <th class="w-12">#</th>
                        <th>Title</th>
                        <th class="hidden sm:table-cell">Artist</th>
                        <th class="hidden md:table-cell">Album</th>
                        <th class="hidden lg:table-cell">Duration</th>
                        <th class="w-12"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for track in tracks %}
                    <tr class="hover" onclick="playTrack('{{ track.id }}')">
                        <td>{{ loop.index }}</td>
                        <td>
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-base-300 rounded">
                                    <img src="{{ track.cover_url }}" class="w-full h-full object-cover rounded">
                                </div>
                                <span class="font-medium">{{ track.title }}</span>
                            </div>
                        </td>
                        <td class="hidden sm:table-cell">{{ track.artist }}</td>
                        <td class="hidden md:table-cell">{{ track.album }}</td>
                        <td class="hidden lg:table-cell">{{ track.duration_formatted }}</td>
                        <td>
                            <button class="btn btn-ghost btn-sm btn-square">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                                </svg>
                            </button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
function setView(view) {
    const gridView = document.getElementById('grid-view');
    const listView = document.getElementById('list-view');
    
    if (view === 'grid') {
        gridView.classList.remove('hidden');
        listView.classList.add('hidden');
    } else {
        gridView.classList.add('hidden');
        listView.classList.remove('hidden');
    }
    
    // Save preference
    localStorage.setItem('preferredView', view);
}

// Load saved preference
const savedView = localStorage.getItem('preferredView') || 'grid';
setView(savedView);

function playAlbum(albumId) {
    // HTMX call to load album and start playback
    htmx.ajax('POST', `/api/play/album/${albumId}`, {
        target: '#now-playing-panel',
        swap: 'innerHTML'
    });
}

function playTrack(trackId) {
    // Communicate with WASM player
    if (window.audioPlayer) {
        window.audioPlayer.loadTrack(trackId);
    }
}
</script>